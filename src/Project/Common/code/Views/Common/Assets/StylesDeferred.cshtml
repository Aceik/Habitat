@using Sitecore.Foundation.Assets.Services
@model Sitecore.Mvc.Presentation.RenderingModel

@if (RenderAssetsService.Current.HasInlineStyles(Request))
{
    <noscript id="deferred-styles">
        @*Styles*@ 
        @RenderAssetsService.Current.RenderStyles(true)
    </noscript>
    <script>
        var loadDeferredStyles = function() {
            var addStylesNode = document.getElementById("deferred-styles");
            var replacement = document.createElement("div");
            replacement.innerHTML = addStylesNode.textContent;
            document.body.appendChild(replacement);
            addStylesNode.parentElement.removeChild(addStylesNode);
        };
        var raf = requestAnimationFrame || mozRequestAnimationFrame ||
            webkitRequestAnimationFrame || msRequestAnimationFrame;
        if (raf) raf(function() { window.setTimeout(loadDeferredStyles, 0); });
        else window.addEventListener('load', loadDeferredStyles);
    </script>
}
else
{
    @RenderAssetsService.Current.RenderStyles(false)
}

